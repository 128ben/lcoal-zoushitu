# 实时数据流价格折线图

基于 Vue3、Vite 和 Pixi.js 的高性能实时价格数据可视化系统。

## 🚀 项目特点

### 技术栈
- **Vue3** - 现代响应式前端框架
- **Vite** - 快速构建工具，支持热更新
- **Pixi.js** - 高性能2D WebGL渲染引擎

### 核心功能
- ✨ **实时数据流** - 模拟WebSocket数据源，动态频率（1秒2-3条数据）
- 📊 **高性能渲染** - 基于WebGL的流畅图表显示
- 🎯 **交互控制** - 缩放、拖拽、暂停等完整交互功能
- 📱 **响应式设计** - 适配不同屏幕尺寸
- 🎨 **美观界面** - 现代化深色主题设计

### 可视化效果
- **时间轴流动** - X轴时间从左到右连续流动
- **动态网格** - 背景网格随时间同步移动
- **折线图显示** - 价格数据在Y轴四分之三位置展示
- **数据点标记** - 清晰的数据点，最新点红色高亮

### 交互功能
- 🔍 **鼠标滚轮缩放** - 支持图表放大缩小
- 👆 **左键拖拽** - 查看历史数据
- 🎮 **控制面板** - 放大、缩小、重置、暂停等操作
- 📈 **实时统计** - 显示数据频率、总数据量等信息

## 📦 安装和运行

### 环境要求
- Node.js >= 16.0.0
- npm >= 7.0.0

### 安装依赖
```bash
npm install
```

### 开发模式
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

### 预览生产版本
```bash
npm run preview
```

## 🏗️ 项目结构

```
src/
├── components/
│   └── PriceChart.vue      # 主图表组件
├── utils/
│   ├── mockWebSocket.js    # Mock WebSocket数据源
│   ├── dataManager.js      # 数据管理器
│   └── pixiChart.js        # Pixi.js图表渲染器
├── App.vue                 # 根组件
└── main.js                 # 应用入口
```

## 🔧 核心模块说明

### MockWebSocket
模拟真实WebSocket连接，提供动态频率的价格数据：
- 支持1秒内2-3条数据的随机分布
- 可配置价格波动率和基础价格
- 完整的WebSocket生命周期模拟

### DataManager
高效的数据管理系统：
- 循环缓冲区避免内存溢出
- 实时频率统计
- 事件驱动的数据更新机制

### PixiChart
基于Pixi.js的高性能图表渲染器：
- WebGL硬件加速渲染
- 支持缩放、拖拽等交互
- 流畅的动画效果
- 响应式布局适配

## 🎮 使用说明

### 控制按钮
- **🔍+ 放大** - 放大图表视图
- **🔍- 缩小** - 缩小图表视图  
- **🎯 重置** - 重置到默认视图
- **⏸️ 暂停** - 暂停/继续数据更新
- **🗑️ 清空** - 清空所有历史数据

### 鼠标操作
- **滚轮** - 缩放图表
- **左键拖拽** - 移动视图查看历史数据
- **悬停** - 显示数据点详细信息（计划功能）

### 状态信息
- **实时频率** - 显示当前数据接收频率
- **总数据** - 显示接收的数据总数
- **当前价格** - 显示最新价格和变化百分比
- **连接状态** - 显示WebSocket连接状态

## 🎨 自定义配置

### 修改数据源参数
```javascript
// 在 PriceChart.vue 中修改
mockWs = createMockWebSocket('ws://localhost:8080/price', {
  basePrice: 100,           // 基础价格
  volatility: 0.025,        // 波动率 (2.5%)
  minDataPerSecond: 2,      // 最小数据频率
  maxDataPerSecond: 3       // 最大数据频率
});
```

### 修改图表样式
```javascript
// 在 PriceChart.vue 中修改
pixiChart = new PixiChart(chartContainer.value, {
  backgroundColor: 0x1a1a1a,     // 背景色
  gridColor: 0x333333,          // 网格线颜色
  lineColor: 0x00aaff,          // 折线颜色
  pointColor: 0xffffff,         // 数据点颜色
  latestPointColor: 0xff4444    // 最新点颜色
});
```

## 🔍 性能特点

- **60FPS流畅渲染** - 基于WebGL的硬件加速
- **内存优化** - 智能数据缓存和清理机制
- **响应迅速** - 用户操作响应时间 < 100ms
- **高并发处理** - 支持每秒多条数据无卡顿

## 🌟 技术亮点

1. **Mock WebSocket实现** - 完美模拟真实数据流特征
2. **动态数据频率** - 真实还原市场数据的随机性
3. **高性能渲染** - Pixi.js WebGL渲染确保流畅体验
4. **模块化架构** - 清晰的代码结构便于维护扩展
5. **响应式设计** - 完美适配各种设备和屏幕

## 📝 开发说明

### 添加新功能
1. 在对应的工具类中添加核心逻辑
2. 在Vue组件中添加UI交互
3. 确保性能和用户体验

### 性能优化建议
- 使用对象池减少GC压力
- 合理控制数据缓存大小
- 优化渲染循环避免不必要的重绘

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## �� 许可证

MIT License 